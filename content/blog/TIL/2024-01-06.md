---
title: "[TS] react-i18next 다국어텍스트 타입 지정"
date: 2024-01-06 13:01:00
category: til
thumbnail: 'ts'
draft: true
---

## 세팅

React Native에서 `react-i18next`를 사용해서 한국어, 영어, 인도네시아어 총 3개의 언어를 지원할 필요가 있었다.

사용한 다국어 라이브러리와 각각의 버젼은 다음과 같다.


```
- i18next: v22.5.11
- react-i18next: v12.3.1
- react-native-localize: v2.2.6 (기기 시스템 언어 가져오기 위해 사용)
```

파일 구조는 다음과 같다.

```bash
./
│
│... 
│
├── i18n.ts
├── i18next.d.ts
└── locales
    ├── en
    │   ├── index.ts
    │   └── translation.json
    ├── id
    │   ├── index.ts
    │   └── translation.json
    └── ko
        ├── index.ts
        └── translation.json
```


#### i18n.ts

```tsx
import i18next from 'i18next';
import { initReactI18next } from 'react-i18next';
import { getLocales } from 'react-native-localize';
import AsyncStorage from '@react-native-async-storage/async-storage';
import { ASYNC_STORAGE_KEYS } from 'constants/common';
import en from './locales/en';
import id from './locales/id';
import ko from './locales/ko';
import type { LanguageDetectorAsyncModule } from 'i18next';
import type { LanguageTypes } from 'types/common';

export const locales = { en, ko, id };

// 디바이스 설정에서 가장 위로 선택된 언어가 현재 디바이스에 적용된 언어. 따라서 배열에 0번째 데이터를 가져옴.
// 언어 코드를 의미함, ex) 'en', 'ko', 'id', ...
export const deviceSystemLanguage = getLocales()[0].languageCode;

const languageDetector: LanguageDetectorAsyncModule = {
  type: 'languageDetector',
  async: true,
  detect: callback => {
    AsyncStorage.getItem(ASYNC_STORAGE_KEYS.language).then(lang => {
      if (lang) {
        // AsyncStorage에 저장된 언어가 있으면 해당 언어를 사용
        callback(lang);
      }
      
	  callback(deviceSystemLanguage);
    });
    return;
  },
  cacheUserLanguage: (language: LanguageTypes) => {
    AsyncStorage.setItem(ASYNC_STORAGE_KEYS.language, language);
  },
};

const i18n = i18next
  .use(languageDetector)
  .use(initReactI18next)
  .init({
    fallbackLng: 'en',
    resources: locales,
    returnObjects: true,
    react: {
      useSuspense: false,
    },
  });

export default i18n;
```
