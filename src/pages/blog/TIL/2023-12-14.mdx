---
title: 'Unity WebGL (+ React)'
date: 2023-12-14 22:12:05
category: React
thumbnail: 'unity'
description: 'Unity WebGLì„ React í”„ë¡œì íŠ¸ì— í†µí•©í•˜ëŠ” ë°©ë²•ê³¼, ê·¸ í•œê³„ë¥¼ ì•Œì•„ë³´ì.'
draft: false
---

import Layout from '/src/templates/blog-post';
export default Layout;


![](https://i.imgur.com/vyqq68x.png)

UnityëŠ” ì—¬ëŸ¬ê°€ì§€ export ë°©ì‹ì„ ì§€ì›í•˜ëŠ”ë°, ê·¸ì¤‘ WebGL í˜•ì‹ë„ ìˆë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ë©´ ë¸Œë¼ìš°ì €ì—ì„œ Unity ì—”ì§„ìœ¼ë¡œ ê°œë°œëœ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

![](https://i.imgur.com/Dj2mrRc.png)

WebGL ë°©ì‹ìœ¼ë¡œ Unity í”„ë¡œì íŠ¸ë¥¼ exportí•˜ë©´ ìœ„ ì‚¬ì§„ê³¼ ê°™ì€ êµ¬ì„±ì„ ê°–ëŠ”ë‹¤.

```
- Build
- dist
- index.html
- StreamingAssets
- TemplateData
```

ìœ„ êµ¬ì¡°ë¥¼ ë³´ë©´ ì•Œ ìˆ˜ ìˆë“¯, Unity WebGL í˜•ì‹ìœ¼ë¡œ exportëœ HTML íŒŒì¼ì€ ì¶”ê°€ì ì¸ ë¦¬ì†ŒìŠ¤ë¥¼ í•„ìš”ë¡œ í•œë‹¤.

CORS ì •ì±…ì— ì˜í•´ì„œ <u>ì›¹ì—ì„œ ë¡œì»¬ íŒŒì¼ì— ì ‘ê·¼í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥</u>í•˜ê¸° ë•Œë¬¸ì—, ì›¹ì„œë²„ë¥¼ í†µí•´ í˜¸ìŠ¤íŒ…í•´ì•¼ í•œë‹¤.

![](https://i.imgur.com/MgWOwv5.png)

> index.html íŒŒì¼ì„ ë”ë¸”í´ë¦­í•´ì„œ ê·¸ëƒ¥ ì—´ë ¤ê³  í•˜ë©´ ìœ„ì™€ ê°™ì´ ì—ëŸ¬ê°€ ë°œìƒí•  ê²ƒì´ë‹¤.


dockerë¥¼ ì‚¬ìš©í•´ì„œ `nginx` í˜¹ì€ `apache` ì›¹ì„œë²„ë¥¼ ì—´ ìˆ˜ë„ ìˆê² ì§€ë§Œ, ì—¬ê¸°ì„œëŠ” êµ³ì´ í•„ìš”ì—†ìœ¼ë‹ˆê¹Œ ê°„ë‹¨í•˜ê²Œ [http-server](https://github.com/http-party/http-server)ë¥¼ ì‚¬ìš©í•´ì„œ ì›¹ì„œë²„ë¥¼ ì—´ì–´ë³´ì.

<u>`index.html` íŒŒì¼ì´ ìœ„ì¹˜í•œ ê²½ë¡œ</u>ì—ì„œ, í„°ë¯¸ë„ì— ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•œë‹¤.

```
$ yarn global add http-server # ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆëŠ” ê²½ìš°ëŠ” í•´ë‹¹ ëª…ë ¹ì–´ ìƒëµ
$ http-server -p 8000
```

![](https://i.imgur.com/yJfPzlY.png)

`localhost:8000` ìœ¼ë¡œ ì ‘ì†í•˜ë©´ ìœ„ ì‚¬ì§„ê³¼ ê°™ì´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©°, Unity í™”ë©´ì€ `id`ê°€ `unity-canvas`ì¸ HTML `<canvas>` íƒœê·¸ë¡œ ë Œë”ë§ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.


## ğŸ“¦react-unity-webgl ë¼ì´ë¸ŒëŸ¬ë¦¬ë€?

![](https://i.imgur.com/XhtdIh8.png)

Unity â†”ï¸ Browser ê°„ ì¸í„°ë ‰ì…˜ì„ ì›í•˜ëŠ” ê²½ìš°, ë¡œì§ì„ Unity ë¿ë§Œ ì•„ë‹ˆë¼ ì›¹ ìª½ì—ì„œë„ ì²˜ë¦¬í•  í•„ìš”ê°€ ìˆì„ ê²ƒì´ë‹¤.

ì´ëŸ´ ë•Œ `index.html`ì— ì§ì ‘ ë°”ë‹ë¼ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì€ ìƒë‹¹íˆ ë¶ˆí¸í•  ìˆ˜ ìˆë‹¤.

[react-unity-webgl](https://github.com/jeffreylanters/react-unity-webgl) ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” React ì–´í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ Unity WebGL í”„ë¡œì íŠ¸ë¥¼ ì‰½ê²Œ í†µí•©í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ”ë‹¤.


```tsx
import { Unity, useUnityContext } from 'react-unity-webgl';

function App() {
  const {unityProvider, sendMessage} = useUnityContext({
    loaderUrl: '/unity/Build/webglrecordtest.loader.js',
    dataUrl: '/unity/Build/webglrecordtest.data',
    frameworkUrl: '/unity/Build/webglrecordtest.framework.js',
    codeUrl: '/unity/Build/webglrecordtest.wasm',
  })

  return (
    <div style={{display: 'flex', flexDirection: 'column', width: '1000px', rowGap: '10px'}}>
      <Unity unityProvider={unityProvider} style={{width: '100%', height: '500px'}} />
      <button onClick={() => sendMessage('WebGLTest', 'UnityStartRecording')}>StartRecording</button>
      <button onClick={() => sendMessage('WebGLTest', 'UnityStopRecording')}>StopRecording</button>
      <button onClick={() => sendMessage('WebGLTest', 'UnityDownloadFile')}>DownloadFile</button>
      <button onClick={() => sendMessage('WebGLTest', 'UnityNoAudio')}>NoAudio</button>
    </div>
  );
}

export default App;
```

ìœ„ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ Unityë¥¼ React í”„ë¡œì íŠ¸ì— í†µí•©í•  ìˆ˜ ìˆë‹¤.

![](https://i.imgur.com/e0s91nY.png)


![](https://i.imgur.com/YhGBwgz.png)


`<Unity>` ì»´í¬ë„ŒíŠ¸ëŠ” `id`ë¡œ `react-unity-webgl-canvas2`ë¥¼ ê°–ëŠ” HTML `<canvas>` íƒœê·¸ë¡œ ë Œë”ë§ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.


## ğŸš¨ react-unity-webglì„ ì‚¬ìš©í•  ë•Œì˜ ë¬¸ì œì 


react-unity-webglì€ ë¶„ëª… React ì–´í”Œë¦¬ì¼€ì´ì…˜ì— Unity WebGL í”„ë¡œì íŠ¸ë¥¼ ì‰½ê²Œ í†µí•©í•  ìˆ˜ ìˆë„ë¡ í•´ ì£¼ëŠ” ê°•ë ¥í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¼ê³  ìƒê°í•œë‹¤.

í•˜ì§€ë§Œ, Unity í”„ë¡œì íŠ¸ì— ì™¸ë¶€ scriptë¥¼ í¬í•¨ë˜ì–´ ìˆëŠ” ê²½ìš°ê°€ ë¬¸ì œê°€ ëœë‹¤.

![](https://i.imgur.com/WDhYpKb.png)

ë‚´ê°€ ì‚¬ìš©í•œ Unity ë¹Œë“œíŒŒì¼ì˜ index.htmlì€ ìœ„ ì‚¬ì§„ê³¼ ê°™ì´ `<script>` íƒœê·¸ë¥¼ ì‚¬ìš©í•´ì„œ ì™¸ë¶€ JS íŒŒì¼ì„ ë¡œë“œí•´ì˜¤ê³  ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![](https://i.imgur.com/Q9SLnCK.png)

ì´ë•Œ, `index.html`ì„ ê·¸ëƒ¥ ì‹¤í–‰ì‹œí‚¤ë©´ ì •ìƒì ìœ¼ë¡œ ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë¡œë“œí•´ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![](https://i.imgur.com/CxeLuob.png)

ê·¸ëŸ°ë°, `react-unity-webgl`ì„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ Reactì™€ í†µí•©í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, ìœ„ ì‚¬ì§„ì²˜ëŸ¼ `index.html`ì— ëª…ì‹œëœ ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í•œë‹¤!!

ì´ë¥¼ í•´ê²°í•´ë³´ë ¤ê³ , unityì—ì„œ ë§Œë“¤ì–´ì§„ `index.html`ì´ ì•„ë‹Œ, react í”„ë¡œì íŠ¸ì˜ ìœ ì¼í•œ `index.html`ì— í•´ë‹¹ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ê°€í•´ë„ (ê²½ë¡œëŠ” ì˜¬ë°”ë¥´ê²Œ ìˆ˜ì •) ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.

## ğŸ“ ê²°ë¡ 

Unityê°€ ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, react-unity-webglì„ ì‚¬ìš©í•´ì„œ reactë¡œ ë¹ ë¥´ê²Œ ê°œë°œí•˜ê³ , ë§Œì•½ ì‚¬ìš©í•œë‹¤ë©´ Unityì˜ `index.html` íŒŒì¼ ë‚´ë¶€ì— ì§ì ‘ ì¸í„°ë ‰ì…˜ê³¼ ê´€ë ¨ëœ ë¡œì§ì„ ì§ì ‘ ì‘ì„±í•´ì•¼ í•  ê²ƒ ê°™ë‹¤.

